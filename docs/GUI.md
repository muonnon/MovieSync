# GUI 화면 구성

## 개요

MovieSync 클라이언트는 **Java Swing**을 사용하여 GUI를 구현합니다. 전체 애플리케이션은 **CardLayout** 기반의 화면 전환을 사용합니다.

---

## 화면 구조

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        MovieSync GUI 구조                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│  ┌────────────────────────┐                                            │
│  │      LoginFrame        │ ◀── 시작 화면                              │
│  │   (로그인 전용 창)     │                                            │
│  └───────────┬────────────┘                                            │
│              │ 로그인 성공                                              │
│              ▼                                                          │
│  ┌─────────────────────────────────────────────────────────────────┐   │
│  │                        MainFrame                                 │   │
│  │  ┌─────────────────────────────────────────────────────────┐    │   │
│  │  │                     Top Panel                            │    │   │
│  │  │  🎬 MovieSync        [username님 환영합니다] [로그아웃]  │    │   │
│  │  └─────────────────────────────────────────────────────────┘    │   │
│  │  ┌──────────────┬──────────────────────────────────────┐    │   │
│  │  │   Left Menu  │            Content Panel                  │    │   │
│  │  │   (JTree)    │          (CardLayout)                     │    │   │
│  │  │              │  ┌────────────────────────────────────┐   │    │   │
│  │  │  영화 목록    │  │  MovieListPanel  (MOVIES)          │   │    │   │
│  │  │  채팅방       │  ├────────────────────────────────────┤   │    │   │
│  │  │  감상평       │  │  ChatPanel       (CHAT)            │   │    │   │
│  │  │  북마크       │  ├────────────────────────────────────┤   │    │   │
│  │  │              │  │  ReviewPanel     (REVIEW)          │   │    │   │
│  │  │              │  ├────────────────────────────────────┤   │    │   │
│  │  │              │  │  BookmarkPanel   (BOOKMARK)        │   │    │   │
│  │  └──────────────┴──┴────────────────────────────────────┘   │    │   │
│  └─────────────────────────────────────────────────────────────────┘   │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 1. LoginFrame (로그인 화면)

### 화면 구성

```
┌─────────────────────────────────────────┐
│                                         │
│                                         │
│              MovieSync                  │
│       실시간 영화 협업 플랫폼           │
│                                         │
│                                         │
│       닉네임:  ┌──────────────────┐     │
│                │                  │     │
│                └──────────────────┘     │
│                                         │
│              ┌──────────────┐           │
│              │   연결하기   │           │
│              └──────────────┘           │
│                                         │
│         서버: localhost:55555           │
│                                         │
└─────────────────────────────────────────┘
```

### 컴포넌트 상세

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| 타이틀 | JLabel | "MovieSync" (폰트: 맑은 고딕, 28pt, Bold) |
| 부제목 | JLabel | "실시간 영화 협업 플랫폼" |
| 닉네임 입력 | JTextField | 15칸, Enter 키로 로그인 가능 |
| 연결 버튼 | JButton | 파란색 배경 (#2196F3), 흰색 글씨 |
| 서버 정보 | JLabel | "서버: localhost:55555" |

### 동작

1. **닉네임 입력** → Enter 키 또는 버튼 클릭
2. **유효성 검사**: 빈 값, 2~20자 제한
3. **서버 연결** → `Client.connectToServer()`
4. **응답 대기**:
   - `LOGIN_OK`: MainFrame으로 전환
   - `LOGIN_FAIL`: 오류 메시지 표시

---

## 2. MainFrame (메인 화면)

### 레이아웃 구조

```java
setLayout(new BorderLayout());
// NORTH: 상단 패널 (타이틀 + 사용자 정보)
// WEST:  메뉴 트리 (JTree)
// CENTER: 콘텐츠 패널 (CardLayout)
```

### 상단 패널 (Top Panel)

```
┌─────────────────────────────────────────────────────────────────────┐
│  MovieSync                           username님 환영합니다 [로그아웃] │
└─────────────────────────────────────────────────────────────────────┘
```

- 배경색: #2196F3 (파란색)
- 높이: 60px
- 폰트: 맑은 고딕, 24pt, Bold

### 왼쪽 메뉴 (JTree)

```
MovieSync (루트, 숨김)
├── 영화 목록
├── 채팅방
├── 감상평
└── 북마크
```

| 설정 | 값 |
|------|-----|
| 너비 | 200px |
| 행 높이 | 30px |
| 루트 표시 | false |
| 폰트 | 맑은 고딕, 14pt |

### 콘텐츠 패널 (CardLayout)

| 카드 이름 | 패널 | 설명 |
|-----------|------|------|
| "MOVIES" | MovieListPanel | 영화 목록 화면 |
| "CHAT" | ChatPanel | 채팅방 화면 |
| "REVIEW" | ReviewPanel | 감상평 화면 |
| "BOOKMARK" | BookmarkPanel | 북마크 화면 |

### 화면 전환 메서드

```java
// 메뉴 선택 시
private void handleMenuSelection(String menuName) {
    if (menuName.contains("영화 목록")) {
        cardLayout.show(contentPanel, "MOVIES");
        movieListPanel.loadMovies();
    } else if (menuName.contains("채팅방")) {
        cardLayout.show(contentPanel, "CHAT");
    } else if (menuName.contains("감상평")) {
        cardLayout.show(contentPanel, "REVIEW");
    } else if (menuName.contains("북마크")) {
        cardLayout.show(contentPanel, "BOOKMARK");
        bookmarkPanel.loadBookmarks();
    }
}

// 외부에서 호출 가능
public void showChatRoom(String movieCd, String movieNm);
public void showReviews(String movieCd, String movieNm);
```

---

## 3. MovieListPanel (영화 목록 화면)

### 화면 구성

```
┌─────────────────────────────────────────────────────────────────────┐
│ 실시간 박스오피스 Top 10 (2025-12-10)           [새로고침]   │
├──────────────────────────────────┬──────────────────────────────────┤
│ ┌────────────────────────────┐   │  선택한 영화 정보               │
│ │ 순위 │ 영화명    │ 누적관객│   │                                 │
│ ├──────┼───────────┼─────────│   │  위키드                          │
│ │  1   │ 위키드    │ 500만   │   │                                 │
│ │  2   │ 글래디...│ 350만   │   │  순위: 1위                       │
│ │  3   │ ...      │ ...     │   │  개봉일: 2024-11-20              │
│ │  4   │ ...      │ ...     │   │  누적관객: 5,000,000명           │
│ │  5   │ ...      │ ...     │   │                                 │
│ │  6   │ ...      │ ...     │   │  ┌─────────────────────────┐    │
│ │  7   │ ...      │ ...     │   │  │ 채팅방 입장              │    │
│ │  8   │ ...      │ ...     │   │  └─────────────────────────┘    │
│ │  9   │ ...      │ ...     │   │  ┌─────────────────────────┐    │
│ │ 10   │ ...      │ ...     │   │  │ 감상평 보기              │    │
│ └────────────────────────────┘   │  └─────────────────────────┘    │
│                                  │  ┌─────────────────────────┐    │
│                                  │  │ 북마크 추가              │    │
│                                  │  └─────────────────────────┘    │
├──────────────────────────────────┴──────────────────────────────────┤
│                          (JSplitPane - 분할선 위치: 500px)          │
└─────────────────────────────────────────────────────────────────────┘
```

**참고**: 헤더에 시스템 기준 오늘 날짜가 자동으로 표시됩니다.

### 영화 목록 테이블 (JTable)

| 열 | 너비 | 내용 |
|----|------|------|
| 순위 | 50px | 1~10 |
| 영화명 | 200px | 영화 제목 |
| 누적관객 | 100px | 포맷팅된 숫자 |
| 개봉일 | 100px | YYYY-MM-DD |

### 상세 정보 패널

- 영화 선택 전: "영화를 선택해주세요" 표시
- 영화 선택 후: 제목, 순위, 개봉일, 누적관객 표시
- 액션 버튼 활성화

### 액션 버튼

| 버튼 | 동작 |
|------|------|
| 채팅방 입장 | `mainFrame.showChatRoom()` 호출 |
| 감상평 보기 | `mainFrame.showReviews()` 호출 |
| 북마크 추가 | `client.addBookmark()` 호출, 중복 추가 방지 |

---

## 4. ChatPanel (채팅 화면)

### 개요

ChatPanel은 **CardLayout**을 사용하여 두 화면을 전환합니다:
- **MAIN**: 활성 채팅방 목록 (영화 목록 카드)
- **CHAT_ROOM**: 특정 채팅방 화면

### 4.1 메인 화면 (채팅방 목록)

```
┌─────────────────────────────────────────────────────────────────────┐
│ 활성 채팅방                                          [새로고침]    │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ 1위. 위키드                                                   │  │
│  │ 개봉일: 2024-11-20 | 누적관객: 5,000,000명             [입장]│  │
│  └───────────────────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ 2위. 글래디에이터 2                                           │  │
│  │ 개봉일: 2024-11-06 | 누적관객: 3,500,000명             [입장]│  │
│  └───────────────────────────────────────────────────────────────┘  │
│                              ...                                    │
├─────────────────────────────────────────────────────────────────────┤
│                                                        [나가기]    │
└─────────────────────────────────────────────────────────────────────┘
```

### 4.2 채팅방 화면

```
┌─────────────────────────────────────────────────────────────────────┐
│ 채팅방: 위키드                     [로그 다운로드*] [나가기]       │
├─────────────────────────────────────────────────────────────────────┤
│  ┌────────────────────────────────────────┐  ┌──────────────────┐  │
│  │                                        │  │ 접속자 (3명)     │  │
│  │  [10:30:15] [시스템] 채팅방에 입장     │  │                  │  │
│  │  [10:30:20] 영화광: 재밌어요!          │  │  영화광          │  │
│  │  [10:30:25] 씨네필: OST 좋아요         │  │  씨네필          │  │
│  │  [10:30:30] [시스템] 무비러버님 입장   │  │  무비러버        │  │
│  │                                        │  │                  │  │
│  └────────────────────────────────────────┘  └──────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────┐ ┌──────────┐  │
│ │ 메시지 입력...                                   │ │  전송    │  │
│ └──────────────────────────────────────────────────┘ └──────────┘  │
└─────────────────────────────────────────────────────────────────────┘
```

**참고**: [로그 다운로드] 버튼은 관리자(admin) 전용입니다.

### 컴포넌트 상세

| 컴포넌트 | 타입 | 설명 |
|----------|------|------|
| titleLabel | JLabel | 채팅방 제목 (영화명 표시) |
| chatArea | JTextArea | 채팅 메시지 표시 영역 (읽기 전용) |
| userListModel | DefaultListModel | 접속자 목록 데이터 |
| userList | JList | 접속자 목록 표시 |
| messageField | JTextField | 메시지 입력 필드 (Enter로 전송) |
| sendButton | JButton | 메시지 전송 버튼 |
| leaveButton | JButton | 채팅방 나가기 버튼 |

### 주요 기능

| 기능 | 메서드 | 설명 |
|------|--------|------|
| 메인 화면 표시 | `showMainView()` | 채팅방 목록 화면으로 전환 |
| 채팅방 입장 | `joinRoom(movieCd, movieNm)` | 서버에 JOIN_ROOM 요청 |
| 채팅방 퇴장 | `leaveRoom()` | 서버에 LEAVE_ROOM 요청 |
| 메시지 전송 | `sendMessage()` | 서버에 CHAT 요청 (500자 제한) |
| 로그 다운로드 | `downloadCurrentRoomLog()` | 관리자 전용 로그 파일 생성 |

### 서버 메시지 처리

| 메시지 | 동작 |
|--------|------|
| `MOVIES_COUNT` | 영화 목록 초기화 |
| `MOVIES_DATA` | 영화 데이터 수신 (카드 생성용) |
| `MOVIES_END` | 영화 카드 렌더링 완료 |
| `ROOM_OK` | 입장 성공, 입력 필드 활성화 |
| `USER_JOIN` | 접속자 목록에 추가, 시스템 메시지 |
| `USER_LEFT` | 접속자 목록에서 제거, 시스템 메시지 |
| `CHAT_ALL` | 채팅 메시지 화면에 표시 |

### 관리자 모드

닉네임이 `admin`인 경우 관리자 모드가 활성화됩니다:
- 채팅방 화면에 "로그 다운로드" 버튼 표시 (초록색)
- 현재 채팅방의 로그 파일을 `chatlog_영화명_타임스탬프.txt` 형식으로 저장

---

## 5. ReviewPanel (감상평 화면)

### 계획된 화면 구성

```
┌─────────────────────────────────────────────────────────────────────┐
│ ⭐ [영화제목] 감상평                          평균 평점: ★★★★☆ 4.2 │
├─────────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ 감상평 작성                                                   │  │
│  │                                                               │  │
│  │  별점: ☆ ☆ ☆ ☆ ☆  (클릭으로 선택)                           │  │
│  │                                                               │  │
│  │  ┌─────────────────────────────────────────────────────────┐ │  │
│  │  │ 감상평을 입력해주세요...                                │ │  │
│  │  │                                                         │ │  │
│  │  └─────────────────────────────────────────────────────────┘ │  │
│  │                                              [작성하기]      │  │
│  └───────────────────────────────────────────────────────────────┘  │
├─────────────────────────────────────────────────────────────────────┤
│  총 12개의 감상평                                                   │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ 영화광          ★★★★★                        2025-12-01 15:00 │  │
│  │ 정말 감동적인 영화였습니다!                            [삭제] │  │
│  └───────────────────────────────────────────────────────────────┘  │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │ 씨네필           ★★★★☆                        2025-12-01 16:30 │  │
│  │ OST가 너무 좋았어요. 특히 마지막 장면은...                    │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                              ...                                    │
└─────────────────────────────────────────────────────────────────────┘
```

### 구현 예정 기능

- 영화별 감상평 목록 조회
- 평균 평점 표시
- 새 감상평 작성 (별점 + 텍스트)
- 본인 감상평 삭제

---

## 6. BookmarkPanel (북마크 화면)

### 화면 구성

```
┌─────────────────────────────────────────────────────────────────────┐
│ 내 북마크                                         총 5개           │
├─────────────────────────────────────────────────────────────────────┤
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │ 위키드                                                        │   │
│  │ 1위  |  2024-11-20  |  5,000,000명                           │   │
│  │                                [채팅방] [감상평] [북마크 해제]│   │
│  └──────────────────────────────────────────────────────────────┘   │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │ 글래디에이터 2                                                │   │
│  │ 2위  |  2024-11-06  |  3,500,000명                           │   │
│  │                                [채팅방] [감상평] [북마크 해제]│   │
│  └──────────────────────────────────────────────────────────────┘   │
│                              ...                                    │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐   │
│  │           북마크한 영화가 없습니다.                           │   │
│  │      영화 목록에서 관심 있는 영화를 북마크해보세요!           │   │
│  └──────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────┘
```

### 주요 기능

- 북마크 목록 조회
- 각 영화에서 채팅방/감상평 바로가기
- 북마크 해제

---

## 색상 테마

| 용도 | 색상 코드 | 미리보기 |
|------|-----------|----------|
| 메인 색상 (Primary) | #2196F3 | 🟦 파란색 |
| 배경색 | #FFFFFF | ⬜ 흰색 |
| 텍스트 | #000000 | ⬛ 검정 |
| 보조 텍스트 | #808080 | 🔘 회색 |
| 테두리 | #D3D3D3 | 연회색 |

---

## 폰트

| 용도 | 폰트 | 크기 | 스타일 |
|------|------|------|--------|
| 메인 타이틀 | 맑은 고딕 | 28pt | Bold |
| 섹션 제목 | 맑은 고딕 | 20pt | Bold |
| 부제목 | 맑은 고딕 | 16pt | Bold |
| 본문 | 맑은 고딕 | 14pt | Plain |
| 작은 텍스트 | 맑은 고딕 | 11pt | Plain |

---

## 실행 방법

### GUI 모드 (권장)

```bash
java -cp "bin;lib/sqlite-jdbc-*.jar" LoginFrame
```

### 콘솔 모드 (테스트용)

```bash
java -cp "bin;lib/sqlite-jdbc-*.jar" Client
```

---

[← 돌아가기](./README.md)
