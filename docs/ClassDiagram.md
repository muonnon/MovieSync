# ğŸ“Š í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨

## ì „ì²´ í´ë˜ìŠ¤ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    MovieSync Classes                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                            Server Side                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    has-a    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚   â”‚   Server    â”‚â—†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ DatabaseManager â”‚                           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â”‚          â”‚ has-a                                                             â”‚   â”‚
â”‚   â”‚          â–¼                                                                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    has-a    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚   â”‚ APIManager  â”‚â—†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ DatabaseManager â”‚                           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â”‚          â”‚                                                                   â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚   â”‚ ConnectedClient â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    ChatRoom     â”‚                           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â”‚            â”‚ uses                                                            â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚   â”‚   MSGBuilder    â”‚  â”‚ ReceivedMSGTokenizer   â”‚                           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â”‚                                    â”‚ uses                                    â”‚   â”‚
â”‚   â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚   â”‚
â”‚   â”‚                        â”‚      MSGTable          â”‚                           â”‚   â”‚
â”‚   â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                            Client Side                                       â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  creates   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚   â”‚   â”‚ LoginFrame  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   Client    â”‚                                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚
â”‚   â”‚          â”‚ creates                  â”‚ uses                                   â”‚   â”‚
â”‚   â”‚          â–¼                          â–¼                                        â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚
â”‚   â”‚   â”‚  MainFrame  â”‚            â”‚ CMSGBuilder â”‚                                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚
â”‚   â”‚          â”‚ contains                                                          â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚   â”‚
â”‚   â”‚   â”‚              â”‚              â”‚                   â”‚                        â”‚   â”‚
â”‚   â”‚   â–¼              â–¼              â–¼                   â–¼                        â”‚   â”‚
â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚   â”‚
â”‚   â”‚ â”‚MovieList â”‚ â”‚ ChatPanelâ”‚ â”‚ReviewPanelâ”‚ â”‚BookmarkPanelâ”‚                     â”‚   â”‚
â”‚   â”‚ â”‚  Panel   â”‚ â”‚          â”‚ â”‚          â”‚ â”‚              â”‚                     â”‚   â”‚
â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚   â”‚
â”‚   â”‚                                                                              â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚   â”‚
â”‚   â”‚   â”‚ MessageListener â”‚ â—€â”€â”€ Client ë‚´ë¶€ ìŠ¤ë ˆë“œ                                â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„œë²„ í´ë˜ìŠ¤ ìƒì„¸

### Server

```java
public class Server {
    // í•„ë“œ
    ServerSocket ss                              // ì„œë²„ ì†Œì¼“
    ArrayList<ConnectedClient> clients           // ì—°ê²°ëœ í´ë¼ì´ì–¸íŠ¸ ëª©ë¡
    HashMap<String, ConnectedClient> clientMap   // ë‹‰ë„¤ì„ ê¸°ë°˜ í´ë¼ì´ì–¸íŠ¸ ë§µ
    HashMap<String, ChatRoom> chatRooms          // ì±„íŒ…ë°© ë§µ (ì˜í™”ì½”ë“œê°€ í‚¤)
    DatabaseManager dbManager                    // DB ê´€ë¦¬ì
    APIManager apiManager                        // API ê´€ë¦¬ì

    // ë©”ì„œë“œ
    + main(String[] args)                        // ì„œë²„ ì‹œì‘ì 
    + broadcastToRoom(String roomId, String msg) // ì±„íŒ…ë°© ë¸Œë¡œë“œìºìŠ¤íŠ¸
    + sendToUser(String username, String msg)    // íŠ¹ì • ì‚¬ìš©ìì—ê²Œ ë©”ì‹œì§€
    + removeClient(ConnectedClient client)       // í´ë¼ì´ì–¸íŠ¸ ì œê±°
    + getOrCreateRoom(String roomId)             // ì±„íŒ…ë°© ìƒì„±/ì¡°íšŒ
}
```

### ConnectedClient (extends Thread)

```java
class ConnectedClient extends Thread {
    // í•„ë“œ
    Socket socket                    // í´ë¼ì´ì–¸íŠ¸ ì†Œì¼“
    Server server                    // ì„œë²„ ì°¸ì¡°
    String username                  // ì‚¬ìš©ì ë‹‰ë„¤ì„
    int userId                       // ì‚¬ìš©ì ID
    DataOutputStream dataOutStream   // ì¶œë ¥ ìŠ¤íŠ¸ë¦¼
    DataInputStream dataInStream     // ì…ë ¥ ìŠ¤íŠ¸ë¦¼
    MSGBuilder mb                    // ë©”ì‹œì§€ ë¹Œë”
    ReceivedMSGTokenizer tk          // ë©”ì‹œì§€ íŒŒì„œ

    // ë©”ì„œë“œ
    + run()                          // ìŠ¤ë ˆë“œ ì‹¤í–‰ (ë©”ì‹œì§€ ìˆ˜ì‹  ë£¨í”„)
    - handleLogin(String msg)        // ë¡œê·¸ì¸ ì²˜ë¦¬
    - handleGetMovies()              // ì˜í™” ëª©ë¡ ì¡°íšŒ
    - handleGetDetail(String msg)    // ì˜í™” ìƒì„¸ ì¡°íšŒ
    - handleJoinRoom(String msg)     // ì±„íŒ…ë°© ì…ì¥
    - handleLeaveRoom(String msg)    // ì±„íŒ…ë°© í‡´ì¥
    - handleChat(String msg)         // ì±„íŒ… ë©”ì‹œì§€ ì²˜ë¦¬
    - handleGetReviews(String msg)   // ê°ìƒí‰ ì¡°íšŒ
    - handleSubmitReview(String msg) // ê°ìƒí‰ ì‘ì„±
    - handleDeleteReview(String msg) // ê°ìƒí‰ ì‚­ì œ
    - handleSearchMovie(String msg)  // ì˜í™” ê²€ìƒ‰
    - handleAddBookmark(String msg)  // ë¶ë§ˆí¬ ì¶”ê°€
    - handleDeleteBookmark(String msg)// ë¶ë§ˆí¬ ì‚­ì œ
    - handleGetBookmarks()           // ë¶ë§ˆí¬ ëª©ë¡ ì¡°íšŒ
    - handleDisconnect()             // ì—°ê²° ì¢…ë£Œ
    + sendMessage(String msg)        // ë©”ì‹œì§€ ì „ì†¡
    - getMovieName(String movieCd)   // ì˜í™”ëª… ì¡°íšŒ (í—¬í¼)
}
```

### ChatRoom

```java
class ChatRoom {
    // í•„ë“œ
    String roomId                              // ì±„íŒ…ë°© ID (room_ì˜í™”ì½”ë“œ)
    ArrayList<ConnectedClient> users           // ì°¸ì—¬ ì‚¬ìš©ì ëª©ë¡

    // ë©”ì„œë“œ
    + ChatRoom(String roomId)                  // ìƒì„±ì
    + addUser(ConnectedClient user)            // ì‚¬ìš©ì ì¶”ê°€
    + removeUser(ConnectedClient user)         // ì‚¬ìš©ì ì œê±°
    + broadcast(String msg)                    // ì „ì²´ ë¸Œë¡œë“œìºìŠ¤íŠ¸
    + getUserCount()                           // í˜„ì¬ ì¸ì› ìˆ˜
}
```

### DatabaseManager

```java
public class DatabaseManager {
    // ìƒìˆ˜
    - static final String DB_URL = "jdbc:sqlite:moviesync.db"

    // í•„ë“œ
    - Connection conn                          // DB ì—°ê²°

    // ìƒì„±ì
    + DatabaseManager()                        // DB ì—°ê²° ë° í…Œì´ë¸” ìƒì„±

    // Users ê´€ë ¨ ë©”ì„œë“œ
    + createUser(String username): int         // ì‚¬ìš©ì ìƒì„±
    + isUsernameTaken(String username): boolean// ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸
    + getUsername(int userId): String          // ë‹‰ë„¤ì„ ì¡°íšŒ

    // Movies ê´€ë ¨ ë©”ì„œë“œ
    + saveMovie(...)                           // ì˜í™” ì €ì¥/ê°±ì‹ 
    + getTop10Movies(): ResultSet              // Top 10 ì¡°íšŒ
    + getMovieDetail(String movieCd): ResultSet// ì˜í™” ìƒì„¸ ì¡°íšŒ
    + searchMovies(String keyword): ResultSet  // ì˜í™” ê²€ìƒ‰

    // Reviews ê´€ë ¨ ë©”ì„œë“œ
    + submitReview(...): int                   // ê°ìƒí‰ ì‘ì„±
    + getReviews(String movieCd): ResultSet    // ê°ìƒí‰ ëª©ë¡ ì¡°íšŒ
    + getAverageRating(String movieCd): double // í‰ê·  í‰ì  ì¡°íšŒ
    + getReviewCount(String movieCd): int      // ê°ìƒí‰ ê°œìˆ˜ ì¡°íšŒ
    + deleteReview(int reviewId, int userId): boolean // ê°ìƒí‰ ì‚­ì œ

    // Bookmarks ê´€ë ¨ ë©”ì„œë“œ
    + addBookmark(int userId, String movieCd): boolean    // ë¶ë§ˆí¬ ì¶”ê°€
    + deleteBookmark(int userId, String movieCd): boolean // ë¶ë§ˆí¬ ì‚­ì œ
    + getBookmarks(int userId): ResultSet                 // ë¶ë§ˆí¬ ëª©ë¡

    // ê¸°íƒ€
    + close()                                  // DB ì—°ê²° ì¢…ë£Œ
}
```

### APIManager (extends Thread)

```java
public class APIManager extends Thread {
    // ìƒìˆ˜
    - static final String API_KEY              // API í‚¤
    - static final String API_URL              // API URL

    // í•„ë“œ
    - DatabaseManager dbManager                // DB ê´€ë¦¬ì
    - boolean running                          // ì‹¤í–‰ ìƒíƒœ

    // ë©”ì„œë“œ
    + APIManager(DatabaseManager dbManager)    // ìƒì„±ì
    + run()                                    // ìŠ¤ë ˆë“œ ì‹¤í–‰
    + fetchAndSaveMovies()                     // API í˜¸ì¶œ ë° DB ì €ì¥
    - getTagValue(String tag, Element element) // XML íƒœê·¸ê°’ ì¶”ì¶œ
    - getYesterdayDate(): String               // ì–´ì œ ë‚ ì§œ ë°˜í™˜
    - getNextMondayMidnight(): long            // ë‹¤ìŒ ì›”ìš”ì¼ ìì • ê³„ì‚°
    + stopAPI()                                // ìŠ¤ë ˆë“œ ì¢…ë£Œ
}
```

---

## í´ë¼ì´ì–¸íŠ¸ í´ë˜ìŠ¤ ìƒì„¸

### Client

```java
public class Client {
    // í•„ë“œ
    Socket mySocket                            // ì„œë²„ ì†Œì¼“
    String myUsername                          // ë‹‰ë„¤ì„
    int myUserId                               // ì‚¬ìš©ì ID
    DataOutputStream dataOutStream             // ì¶œë ¥ ìŠ¤íŠ¸ë¦¼
    MessageListener msgListener                // ë©”ì‹œì§€ ìˆ˜ì‹  ìŠ¤ë ˆë“œ
    CMSGBuilder cmb                            // ë©”ì‹œì§€ ë¹Œë”
    - MessageCallback callback                 // ì½œë°± ì¸í„°í˜ì´ìŠ¤

    // ì¸í„°í˜ì´ìŠ¤
    interface MessageCallback {
        void onMessageReceived(String message)
    }

    // ë©”ì„œë“œ
    + setMessageCallback(MessageCallback callback)
    + connectToServer(String username): boolean
    + requestMovies()                          // ì˜í™” ëª©ë¡ ìš”ì²­
    + requestMovieDetail(String movieCd)       // ì˜í™” ìƒì„¸ ìš”ì²­
    + joinRoom(String movieCd, String movieNm) // ì±„íŒ…ë°© ì…ì¥
    + leaveRoom(String movieCd)                // ì±„íŒ…ë°© í‡´ì¥
    + sendChat(String movieCd, String message) // ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡
    + requestReviews(String movieCd)           // ê°ìƒí‰ ìš”ì²­
    + submitReview(...)                        // ê°ìƒí‰ ì‘ì„±
    + deleteReview(int reviewId)               // ê°ìƒí‰ ì‚­ì œ
    + searchMovie(String keyword)              // ì˜í™” ê²€ìƒ‰
    + addBookmark(String movieCd)              // ë¶ë§ˆí¬ ì¶”ê°€
    + deleteBookmark(String movieCd)           // ë¶ë§ˆí¬ ì‚­ì œ
    + requestBookmarks()                       // ë¶ë§ˆí¬ ëª©ë¡ ìš”ì²­
    + disconnect()                             // ì—°ê²° ì¢…ë£Œ
    + main(String[] args)                      // ì½˜ì†” ëª¨ë“œ ì§„ì…ì 
}
```

### MessageListener (extends Thread)

```java
class MessageListener extends Thread {
    // í•„ë“œ
    Socket socket
    DataInputStream dataInStream
    Client.MessageCallback callback

    // ë©”ì„œë“œ
    + MessageListener(Socket s, MessageCallback callback)
    + run()                                    // ë©”ì‹œì§€ ìˆ˜ì‹  ë£¨í”„
    - parseAndDisplay(String msg)              // ì½˜ì†” ì¶œë ¥ìš©
}
```

### LoginFrame (extends JFrame)

```java
public class LoginFrame extends JFrame {
    // í•„ë“œ
    - JTextField usernameField                 // ë‹‰ë„¤ì„ ì…ë ¥
    - JButton loginButton                      // ë¡œê·¸ì¸ ë²„íŠ¼
    - Client client                            // í´ë¼ì´ì–¸íŠ¸ ê°ì²´

    // ë©”ì„œë“œ
    + LoginFrame()                             // ìƒì„±ì (GUI ì´ˆê¸°í™”)
    - attemptLogin()                           // ë¡œê·¸ì¸ ì‹œë„
    - handleServerMessage(String message)      // ì„œë²„ ì‘ë‹µ ì²˜ë¦¬
    + main(String[] args)                      // GUI ì§„ì…ì 
}
```

### MainFrame (extends JFrame)

```java
public class MainFrame extends JFrame {
    // í•„ë“œ
    - Client client                            // í´ë¼ì´ì–¸íŠ¸ ê°ì²´
    - String username                          // ë‹‰ë„¤ì„
    - JTree menuTree                           // ë©”ë‰´ íŠ¸ë¦¬
    - JPanel contentPanel                      // ì½˜í…ì¸  íŒ¨ë„
    - CardLayout cardLayout                    // í™”ë©´ ì „í™˜ ë ˆì´ì•„ì›ƒ
    - MovieListPanel movieListPanel            // ì˜í™” ëª©ë¡ íŒ¨ë„
    - ChatPanel chatPanel                      // ì±„íŒ… íŒ¨ë„
    - ReviewPanel reviewPanel                  // ê°ìƒí‰ íŒ¨ë„
    - BookmarkPanel bookmarkPanel              // ë¶ë§ˆí¬ íŒ¨ë„

    // ë©”ì„œë“œ
    + MainFrame(Client client, String username)
    - handleMenuSelection(String menuName)     // ë©”ë‰´ ì„ íƒ ì²˜ë¦¬
    + showChatRoom(String movieCd, String movieNm)
    + showReviews(String movieCd, String movieNm)
    - logout()                                 // ë¡œê·¸ì•„ì›ƒ
    # processWindowEvent(WindowEvent e)        // ì¢…ë£Œ ì²˜ë¦¬
}
```

### MovieListPanel (extends JPanel)

```java
public class MovieListPanel extends JPanel {
    // ë‚´ë¶€ í´ë˜ìŠ¤
    class MovieData {
        String movieCd, movieNm, openDt
        int rank
        long audiAcc, salesAcc
    }

    // í•„ë“œ
    - Client client
    - MainFrame mainFrame
    - JTable movieTable
    - DefaultTableModel tableModel
    - ArrayList<MovieData> movies
    - String selectedMovieCd, selectedMovieNm

    // ë©”ì„œë“œ
    + MovieListPanel(Client client, MainFrame mainFrame)
    + loadMovies()                             // ì˜í™” ëª©ë¡ ë¡œë“œ
    - showMovieDetail(MovieData movie)         // ìƒì„¸ ì •ë³´ í‘œì‹œ
    - setupMessageHandler()                    // ì½œë°± ì„¤ì •
    - handleMessage(String message)            // ë©”ì‹œì§€ ì²˜ë¦¬
}
```

---

## ë©”ì‹œì§€ ê´€ë ¨ í´ë˜ìŠ¤

### MSGBuilder (ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸)

```java
public class MSGBuilder {
    + loginOkMSG(int userId, String username)  // LOGIN_OK
    + loginFailMSG(String reason)              // LOGIN_FAIL
    + welcomeMSG()                             // WELCOME
    + moviesCountMSG(int count)                // MOVIES_COUNT
    + movieDataMSG(...)                        // MOVIES_DATA
    + moviesEndMSG()                           // MOVIES_END
    + movieDetailMSG(...)                      // DETAIL
    + roomOkMSG(...)                           // ROOM_OK
    + userJoinMSG(...)                         // USER_JOIN
    + userLeftMSG(...)                         // USER_LEFT
    + chatAllMSG(...)                          // CHAT_ALL
    + reviewSummaryMSG(...)                    // REV_SUMMARY
    + reviewCountMSG(int count)                // REV_COUNT
    + reviewDataMSG(...)                       // REV_DATA
    + reviewEndMSG()                           // REV_END
    + reviewOkMSG(int reviewId)                // REV_OK
    + reviewFailMSG(String reason)             // REV_FAIL
    + deleteOkMSG()                            // DEL_OK
    + deleteFailMSG(String reason)             // DEL_FAIL
    + bookmarkOkMSG()                          // BOOKMARK_OK
    + bookmarkDelOkMSG()                       // BOOKMARK_DEL_OK
    + disconnectOkMSG()                        // DISCONNECT_OK
    + errorMSG(String errorMsg)                // ERROR
}
```

### CMSGBuilder (í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„)

```java
public class CMSGBuilder {
    + loginMSG(String username)                // LOGIN
    + getMoviesMSG()                           // GET_MOVIES
    + getDetailMSG(String movieCd)             // GET_DETAIL
    + joinRoomMSG(String movieCd, String movieNm) // JOIN_ROOM
    + leaveRoomMSG(String movieCd)             // LEAVE_ROOM
    + chatMSG(String movieCd, String message)  // CHAT
    + getReviewsMSG(String movieCd)            // GET_REVIEWS
    + submitReviewMSG(...)                     // SUBMIT_REVIEW
    + deleteReviewMSG(int reviewId)            // DELETE_REVIEW
    + searchMovieMSG(String keyword)           // SEARCH_MOVIE
    + addBookmarkMSG(String movieCd)           // ADD_BOOKMARK
    + deleteBookmarkMSG(String movieCd)        // DELETE_BOOKMARK
    + getBookmarksMSG()                        // GET_BOOKMARKS
    + disconnectMSG()                          // DISCONNECT
}
```

### ReceivedMSGTokenizer

```java
public class ReceivedMSGTokenizer {
    // í•„ë“œ
    StringTokenizer st
    MSGTable mt

    // ë©”ì„œë“œ
    + detection(String msg): int               // ë©”ì‹œì§€ íƒ€ì… ê°ì§€ (0~13)
    + findUsername(String msg): String
    + findMovieCode(String msg): String
    + findRoomMovieCode(String msg): String
    + findRoomMovieName(String msg): String
    + findLeaveRoomCode(String msg): String
    + findChatRoomCode(String msg): String
    + findChatMessage(String msg): String
    + findReviewMovieCode(String msg): String
    + findSubmitMovieCode(String msg): String
    + findSubmitRating(String msg): int
    + findSubmitContent(String msg): String
    + findDeleteReviewId(String msg): int
    + findSearchKeyword(String msg): String
    + findBookmarkMovieCode(String msg): String
    + findDeleteBookmarkCode(String msg): String
}
```

### MSGTable

```java
public class MSGTable {
    // ìƒìˆ˜
    int numberOfMSG = 14

    // ë©”ì‹œì§€ íƒœê·¸ ë°°ì—´
    String[] MSGtags = {
        "LOGIN",           // 0
        "GET_MOVIES",      // 1
        "GET_DETAIL",      // 2
        "JOIN_ROOM",       // 3
        "LEAVE_ROOM",      // 4
        "CHAT",            // 5
        "GET_REVIEWS",     // 6
        "SUBMIT_REVIEW",   // 7
        "DELETE_REVIEW",   // 8
        "SEARCH_MOVIE",    // 9
        "ADD_BOOKMARK",    // 10
        "DELETE_BOOKMARK", // 11
        "GET_BOOKMARKS",   // 12
        "DISCONNECT"       // 13
    }
}
```

---

## í´ë˜ìŠ¤ ê´€ê³„ ìš”ì•½

| ê´€ê³„ | ì„¤ëª… |
|------|------|
| `Server â—‡â”€â–¶ DatabaseManager` | Serverê°€ DatabaseManagerë¥¼ ì†Œìœ  (has-a) |
| `Server â—‡â”€â–¶ APIManager` | Serverê°€ APIManagerë¥¼ ì†Œìœ  |
| `Server â—‡â”€â–¶ ConnectedClient` | Serverê°€ ì—¬ëŸ¬ ConnectedClientë¥¼ ê´€ë¦¬ (1:N) |
| `Server â—‡â”€â–¶ ChatRoom` | Serverê°€ ì—¬ëŸ¬ ChatRoomì„ ê´€ë¦¬ (1:N) |
| `ConnectedClient â”€â”€â–¶ ChatRoom` | ConnectedClientê°€ ChatRoomì— ì°¸ì—¬ (N:M) |
| `LoginFrame â”€â”€â–¶ Client` | LoginFrameì´ Clientë¥¼ ìƒì„± |
| `LoginFrame â”€â”€â–¶ MainFrame` | ë¡œê·¸ì¸ ì„±ê³µ ì‹œ MainFrame ìƒì„± |
| `MainFrame â—‡â”€â–¶ Panels` | MainFrameì´ ê° Panelì„ í¬í•¨ |
| `Client â—‡â”€â–¶ MessageListener` | Clientê°€ MessageListener ìŠ¤ë ˆë“œ ê´€ë¦¬ |

---

[â† ëŒì•„ê°€ê¸°](./README.md)
